<div class="container">
    <div class="row">
        <form action="../race/" method="post" id="search_results" class="col-sm-10 col-md-8 col-lg-6 mx-20">
            <div class="text-input-container">
                <input name="query" type="text" class="form-control" placeholder="Keywords" value={{@query}}>
            </div>
            
            <select name="selectpicker" class="selectpicker col-sm-2 mx-3" form="search_results">
                <option value="All">All States</option>
                {{#each states}}
                    <option value="{{this}}">{{this}}</option>
                {{/each}}
            </select>
            <button type="submit" class="btn btn-primary">Search</button>
        </form>
    </div>
    <br><br>
    <h2>
    {{#if query}}
        Search Results for: {{query}}
    {{else}}
        <h2>All races
    {{/if}}
    {{#if state}}
        in {{state}}
    {{/if}}
    </h2>
    <div class="row">
        {{#each data }}
            <div class="card col-md-4" >
                <div class="card-header">
                    <b>{{name}}</b>
                </div>
                <div class="card-body">
                    <h5 class="card-title">{{format_date date}}</h5>
                    <p class="card-text">
                        {{distances}}<br>
                        <b>Location:</b> {{city}}, {{state}} {{zipcode}}<br>
                        <b>Phone:</b> {{phone}}<br>
                        <b>URL:</b> <a href="{{url}}">{{url}}</a>
                    </p>
                    <a href="../race/upcoming/{{name}}" class="btn btn-primary">View Details</a>
                </div>
            </div>
        {{/each}}
    </div>
    <p VALUE="Back" onClick="history.go(-1);"><i class="fas fa-arrow-left" ></i> Back</p>
</div>
